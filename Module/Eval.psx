using Psx = Poly.Script.Engine;

class Poly.Bot.Eval : Poly.Bot.Module {
	function Eval() {
		this.Module("Eval");
	}

	function Init() {
		Cmd = GetHandler("Cmd");

		if (App.IsRunningOnMono())
			Cmd.On("${Script}", this.OnEval);
		else 
			Cmd.On("~{Script}", this.OnEval);			
	}

	function OnEval() {
		Thread = async(7000) {
			Ret = Psx.Eval(Script, _);
		};

		if (Ret && !Ret.StartsWith('!'))
			this.SendMessage(Convo, Ret.ToString());
	}
}